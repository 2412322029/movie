<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>用户登录</title>
</head>
<body>
<div id="app">
    <h4>用户登录</h4>
    <span style="color: red">
            {{errmsg}}
        </span>
    <form action="" method="post">
        <label>
            <span class="label-text">账号</span>
            <input type="text" name="username" v-model="user.username">
        </label>
        <br>
        <label>
            <span class="label-text">密码</span>
            <input type="password" name="password" v-model="user.password">
        </label>
        <br>
        <button type="button" @click="login">登录</button>
    </form>
</div>

<script src="js/vue.js"></script>
<script src="js/axios.min.js"></script>
<script>
    const app = new Vue({
        el: "#app",
        data: {
            errmsg: "",
            user: {}
        },
        methods: {
            login() {
                axios.post("http://localhost:8080/movie/user/login"
                    , this.user).then((res) => {
                        console.info(res.data);
                        if (res.data.success) {
                            alert(res.data.message+res.data.code)
                            location.href = "index.html"
                        } else {
                            this.errmsg = res.data.message
                        }
                    }
                )
            }
        }
    })
</script>
</body>
</html>